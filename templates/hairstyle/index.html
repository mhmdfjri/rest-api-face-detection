{% extends "layout.html" %} {% block title %}Gaya Rambut{% endblock %} {% block
content %}

<div class="flex-1 flex flex-col overflow-hidden">
  <header class="bg-white shadow-sm z-10">
    <div class="px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
      <h1 class="text-xl font-semibold text-gray-800">Gaya Rambut</h1>
    </div>
  </header>
  <main class="flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 bg-gray-50">
    <div
      class="mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4"
    >
      <div class="flex flex-col md:flex-row gap-4 md:items-center">
        <a
          href="{{ url_for('hairstyle.create') }}"
          class="inline-flex items-center px-4 py-2 bg-primary text-white rounded-button shadow-sm hover:bg-primary/90 whitespace-nowrap"
        >
          <div class="w-5 h-5 flex items-center justify-center mr-2">
            <i class="ri-add-line"></i>
          </div>
          Tambah Gaya Rambut
        </a>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-sm text-gray-500">Tampilkan:</span>
        <div class="relative">
          <select
            class="appearance-none pl-3 pr-8 py-2 bg-white border border-gray-300 rounded-button text-sm focus:ring-0"
          >
            <option>10</option>
            <option>25</option>
            <option>50</option>
            <option>100</option>
          </select>
          <div
            class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 flex items-center justify-center text-gray-400 pointer-events-none"
          >
            <i class="ri-arrow-down-s-line"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
      <div class="table-container">
        <table class="min-w-full">
          <thead>
            <tr class="bg-gray-50 border-b border-gray-200">
              <th
                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                <div class="flex items-center">
                  No
                  <div
                    class="w-4 h-4 flex items-center justify-center ml-1 text-gray-400"
                  >
                    <i class="ri-arrow-up-down-line"></i>
                  </div>
                </div>
              </th>
              <th
                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                <div class="flex items-center">
                  Nama Gaya Rambut
                  <div
                    class="w-4 h-4 flex items-center justify-center ml-1 text-gray-400"
                  >
                    <i class="ri-arrow-up-down-line"></i>
                  </div>
                </div>
              </th>
              <th
                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Gambar
              </th>
              <th
                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                <div class="flex items-center">
                  Bentuk Wajah
                  <div
                    class="w-4 h-4 flex items-center justify-center ml-1 text-gray-400"
                  >
                    <i class="ri-arrow-up-down-line"></i>
                  </div>
                </div>
              </th>

              <th
                class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Likes
              </th>

              <th
                class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Aksi
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for h in hairstyles %}
            <tr>
              <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
                {{ loop.index }}
              </td>
              <td
                class="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
              >
                {{ h.name }}
              </td>
              <td class="px-4 py-4 whitespace-nowrap">
                <div class="h-16 w-16 rounded-md overflow-hidden bg-gray-100">
                  <img
                    src="{{ url_for('static', filename='hair_cut_recommendation/' ~ h.face_shape[0] ~ '/' ~ h.image) }}"
                    class="h-full w-full object-cover object-top"
                    alt="{{ h.name }}"
                  />
                </div>
              </td>
              <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-700">
                <div class="flex flex-wrap">
                  {% for shape in h.face_shape %}
                  <span class="badge bg-primary bg-opacity-10 text-primary"
                    >{{ shape }}</span
                  >
                  {% endfor %}
                </div>
              </td>

              <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
                {{ h.like_count }}
              </td>

              <td
                class="px-4 py-4 whitespace-nowrap text-right text-sm font-medium"
              >
                <div class="flex justify-end space-x-2">
                  <a
                    href="{{ url_for('hairstyle.edit', id=h.id) }}"
                    class="p-1.5 bg-blue-50 text-blue-600 rounded-button hover:bg-blue-100"
                  >
                    <div class="w-4 h-4 flex items-center justify-center">
                      <i class="ri-pencil-line"></i>
                    </div>
                  </a>
                  <button
                    data-id="{{ h.id }}"
                    class="delete-button p-1.5 bg-red-50 text-red-600 rounded-button hover:bg-red-100"
                  >
                    <div class="w-4 h-4 flex items-center justify-center">
                      <i class="ri-delete-bin-line"></i>
                    </div>
                  </button>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div
        class="px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"
      >
        <div
          class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"
        >
          <div>
            <p class="text-sm text-gray-700">
              Menampilkan <span class="font-medium">1</span> sampai
              <span class="font-medium">6</span> dari
              <span class="font-medium">24</span> hasil
            </p>
          </div>
          <div>
            <nav
              class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
              aria-label="Pagination"
            >
              <a
                href="#"
                class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
              >
                <span class="sr-only">Previous</span>
                <div class="w-5 h-5 flex items-center justify-center">
                  <i class="ri-arrow-left-s-line"></i>
                </div>
              </a>
              <a
                href="#"
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-primary text-sm font-medium text-white"
              >
                1
              </a>
              <a
                href="#"
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"
              >
                2
              </a>
              <a
                href="#"
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"
              >
                3
              </a>
              <span
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"
              >
                ...
              </span>
              <a
                href="#"
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"
              >
                8
              </a>
              <a
                href="#"
                class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
              >
                <span class="sr-only">Next</span>
                <div class="w-5 h-5 flex items-center justify-center">
                  <i class="ri-arrow-right-s-line"></i>
                </div>
              </a>
            </nav>
          </div>
        </div>
        <div class="flex sm:hidden">
          <a
            href="#"
            class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
          >
            Sebelumnya
          </a>
          <a
            href="#"
            class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
          >
            Selanjutnya
          </a>
        </div>
      </div>
    </div>
  </main>
</div>

<div id="deleteModal" class="hidden fixed inset-0 z-50 overflow-y-auto">
  <div
    class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"
  >
    <div class="fixed inset-0 transition-opacity" aria-hidden="true">
      <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
    </div>
    <span
      class="hidden sm:inline-block sm:align-middle sm:h-screen"
      aria-hidden="true"
      >&#8203;</span
    >
    <div
      class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
    >
      <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <div class="sm:flex sm:items-start">
          <div
            class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"
          >
            <div class="w-6 h-6 flex items-center justify-center text-red-600">
              <i class="ri-error-warning-line"></i>
            </div>
          </div>
          <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Hapus Gaya Rambut
            </h3>
            <div class="mt-2">
              <p class="text-sm text-gray-500">
                Apakah Anda yakin ingin menghapus gaya rambut ini? Data yang
                dihapus tidak dapat dikembalikan.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
        <button
          type="button"
          id="confirmDeleteButton"
          class="w-full inline-flex justify-center rounded-button border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm whitespace-nowrap"
        >
          Hapus
        </button>
        <button
          type="button"
          id="cancelDelete"
          class="mt-3 w-full inline-flex justify-center rounded-button border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm whitespace-nowrap"
        >
          Batal
        </button>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const deleteModal = document.getElementById("deleteModal");
    const cancelDeleteButton = document.getElementById("cancelDelete");
    const confirmDeleteButton = document.getElementById("confirmDeleteButton");
    const allDeleteButtons = document.querySelectorAll(".delete-button");

    let hairstyleIdToDelete = null;

    allDeleteButtons.forEach((button) => {
      button.addEventListener("click", function () {
        hairstyleIdToDelete = this.dataset.id;
        deleteModal.classList.remove("hidden");
      });
    });

    confirmDeleteButton.addEventListener("click", function () {
      if (hairstyleIdToDelete) {
        fetch(`/hairstyles/delete/${hairstyleIdToDelete}`, {
          method: "DELETE",
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.message === "success") {
              window.location.href = "{{ url_for('hairstyle.index') }}";
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Terjadi kesalahan saat menghapus data.");
          })
          .finally(() => {
            deleteModal.classList.add("hidden");
          });
      }
    });

    function closeModal() {
      deleteModal.classList.add("hidden");
      hairstyleIdToDelete = null;
    }

    cancelDeleteButton.addEventListener("click", closeModal);

    deleteModal.addEventListener("click", function (e) {
      if (e.target === deleteModal) {
        closeModal();
      }
    });
  });
</script>

{% endblock %}
